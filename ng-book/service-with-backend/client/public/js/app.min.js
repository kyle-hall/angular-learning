function HomeController($scope,HitService){HitService.count().then(function(data){$scope.hits=data}),$scope.registerHit=function(){HitService.registerHit().then(function(data){$scope.hits=data})}}var myApp=angular.module("myApp",["ngRoute","myApp.services"]);myApp.controller("HomeController",HomeController),HomeController.$inject=["$scope","HitService"];var myAppServices=angular.module("myApp.services",[]);myAppServices.factory("HitService",function($q,$http){var service={count:function(){var d=$q.defer();return $http.get("/hits").success(function(data,status){d.resolve(data.hits)}).error(function(data,status){d.reject(data)}),d.promise},registerHit:function(){var d=$q.defer();return $http.post("/hit",{}).success(function(data,status){d.resolve(data.hits)}).error(function(data,status){d.reject(data)}),d.promise}};return service});